import javax.swing.JFrame;
import javax.swing.JLabel;
import javax.swing.JPanel;
import javax.swing.JTextField;
import javax.swing.Timer;
import java.awt.*;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import javax.swing.JButton;
import java.util.*;

public class MathFrame extends JFrame{
	
	//variables and objects
	private final JPanel panel = new JPanel();
	private final JLabel scoreLabel = new JLabel("SCORE: 0"); //display score
	private final JLabel operationLabel = new JLabel(""); //display math operation
	private final JLabel timerLabel = new JLabel("Timer: 5"); //display timer
	private final JLabel messageLabel = new JLabel(""); //display Correct or Incorrect
	private final JButton button1 = new JButton("+");
	private final JButton button2 = new JButton("-");
	private final JButton button3 = new JButton("*");
	private final JButton button4 = new JButton("/");
	private final Random r = new Random(); //to generate random numbers
	private final JTextField box = new JTextField(2);
	private int score; //keep score
	private int a; //first operand
	private int b; //second operand
	private int correctAnswer; //correct answer
	private int userAnswer; //answer from user
	private final Timer t; //Timer
	private int counter; // counter for Timer

	//frame constructor
	public MathFrame(){
		
		//add lister to buttons
		ActionListener listener = new ButtonListener();
		button1.addActionListener(listener);
		button2.addActionListener(listener);
		button3.addActionListener(listener);
		button4.addActionListener(listener);
		
		//add listener to TextField
		box.addActionListener(new ActionListener(){
			public void actionPerformed(ActionEvent e){
				userAnswer = Integer.parseInt(box.getText());
				t.stop();
				checkAnswer(correctAnswer, userAnswer);
			}
		});
		
		//add listener to Timer
		ActionListener list = new TimerListener();
		t = new Timer(1000,list);
		
		//add components to panel
		panel.add(timerLabel);
		panel.add(button1);
		panel.add(button2);
		panel.add(button3);
		panel.add(button4);
		panel.add(operationLabel);
		panel.add(box);
		panel.add(messageLabel);
		panel.add(scoreLabel);
		
		//add panel to frame
		add(panel);
	}
	
	//function to check if the answer from the user is correct
	public void checkAnswer(int x, int y){
		if((x == y) && (counter != 0)){
			score = score + 1; //if answer is correct increment score
			scoreLabel.setText("SCORE: " + score);
			System.out.println("Correct");
			messageLabel.setText("Correct!");
		}else{
			System.out.println("Incorrect");
			messageLabel.setText("Incorrect");
		}
	}
	
	//TimerListener class
	class TimerListener implements ActionListener{
		public void actionPerformed(ActionEvent event){
			counter = counter - 1;
			timerLabel.setText("Timer: " + counter);
			if(counter == 0){
				t.stop(); //when counter hits 0, stop timer
				messageLabel.setText("Time's Up!");
			}
			t.setDelay(1000);
		}
	}
	
	//ButtonListener class
	class ButtonListener implements ActionListener{
		public void actionPerformed(ActionEvent event){  
			String command = event.getActionCommand();

			if(command.equals("+")){
				timerLabel.setText("Timer: 5");
				counter = 5;
				t.start();
				messageLabel.setText("");
				box.setText(""); //clear text box area
				a = r.nextInt(20) + 1; //generate random number between 1-20
				b = r.nextInt(20) + 1; //generate random number between 1-20
				correctAnswer = a + b;
				operationLabel.setText(a + " + " + b + " = ");
				
			}else if(command.equals("-")){
				timerLabel.setText("Timer: 5");
				counter = 5;
				t.start();
				messageLabel.setText("");
				box.setText(""); //clear text box area
				a = r.nextInt(20) + 1; //generate random number between 1-20
				b = r.nextInt(20) + 1; //generate random number between 1-20
				correctAnswer = a - b;
				operationLabel.setText(a + " - " + b + " = ");

			}else if(command.equals("*")){
				timerLabel.setText("Timer: 5");
				counter = 5;
				t.start();
				messageLabel.setText("");
				box.setText(""); //clear text box area
				a = r.nextInt(20) + 1; //generate random number between 1-20
				b = r.nextInt(20) + 1; //generate random number between 1-20
				correctAnswer = a * b; 
				operationLabel.setText(a + " * " + b + " = ");
		
			}else if(command.equals("/")){
				timerLabel.setText("Timer: 5");
				counter = 5;
				t.start();
				messageLabel.setText("");
				box.setText(""); //clear text box area
				a = r.nextInt(20) + 1; //generate random number between 1-20
				b = r.nextInt(20) + 1; //generate random number between 1-20
				correctAnswer = a / b;
				operationLabel.setText(a + " / " + b + " = ");
			
			}
		}
	}
	
	public static void main(String[] args){
		JFrame frame = new MathFrame();
		frame.setTitle("MATH GAME");
		frame.setSize(700,150);
		frame.setLocationRelativeTo(null);
		frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
		frame.setVisible(true);
	}
}
